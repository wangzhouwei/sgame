{"version":3,"sources":["../../../../../assets/Script/Event/assets/Script/Event/GameCore.js"],"names":["GameEventManager","require","GameEvent","cc","Class","extends","statics","getInstance","gameEvent","properties","connectNet","host","cb","connect","startEvent","event","data","log","body","sendMessage","onMsg","msgId","msgData","recieveWXAuthenticationCode","wxcode","xx","gameCfg","EVENT","EVENT_LOGIN_REP","writtenUserInfoIntoCellPhone","sys","localStorage","setItem","userEvName","USER_INFO_KEY","JSON","stringify","user","USER_CARD_INFO_KEY","cards","updateCurrentBatteryStatus","sta","notifyEvent","BATTERTY","BATTERTY_CHARGING","updateCurrentBatteryLevel","elevel","BATTERTY_LEVEL_UPDATE","toPrecision","didUploadToGvoiceSever","fileID","EVENT_YUYIN_UPLOAD","didFinishPlayCurrentMessage","GVOICE","GVOICE_MESSAGE_FINISH_PLAYING"],"mappings":"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","file":"GameCore.js","sourceRoot":"../../../../../assets/Script/Event","sourcesContent":["/**\n * Created by Administrator on 2017/8/31.\n */\nconst GameEventManager = require(\"./GameEventManager.js\");\nconst GameEvent = cc.Class({\n    extends: GameEventManager,\n    statics: {\n        getInstance() {\n            if (!this.gameEvent) {\n                this.gameEvent = new GameEvent();\n            }\n            return this.gameEvent;\n        },\n    },\n    properties: {\n    },\n    connectNet(host, cb) {\n        this.connect(host, cb);\n    },\n\n    /**\n     *  请求协议\n     * @param event 协议id\n     * @param data 需要的字段\n     */\n    startEvent(event, data) {\n        cc.log(`发送的协议id为：${event}`);\n        const body = {\n            \"code\": event,\n        };\n        body.data = data;\n        this.sendMessage(body);\n    },\n\n    /**\n     *  收到服务器回复\n     * @param msgId 回复的协议id\n     * @param msgData 回复的字段\n     */\n    onMsg(msgId, msgData) {\n        cc.log(`gameEvent 收到的协议id为：${msgId}`);\n        cc.log(msgData);\n    },\n    /**\n     *  微信回调返回到code后，被调用的方法(被原生回调的)\n     * @param wxcode 微信成功授权登录后传过来的code\n     */\n    recieveWXAuthenticationCode(wxcode){\n        this.startEvent(cc.xx.gameCfg.EVENT.EVENT_LOGIN_REP,wxcode);\n    },\n    // 往手机本地存用户信息\n    writtenUserInfoIntoCellPhone(data) {\n        cc.sys.localStorage.setItem(cc.xx.userEvName.USER_INFO_KEY, JSON.stringify(data.user));\n        cc.sys.localStorage.setItem(cc.xx.userEvName.USER_CARD_INFO_KEY, JSON.stringify(data.cards));\n        // if(data.agent) {\n        //     cc.sys.localStorage.setItem(cc.xx.userEvName.USER_ANGENT_INFO, JSON.stringify(data.agent));\n        // }\n    },\n    /**\n     *  电量改变监听的回调更新(被原生回调的)\n     * @param sta 充电状态\n     */\n    updateCurrentBatteryStatus(sta) {\n        cc.log(\"oc观察者观察电量发生改变回调\"+sta);\n        if(sta == \"Charging\"){\n            this.notifyEvent(cc.xx.gameCfg.BATTERTY.BATTERTY_CHARGING,true);\n        }else {\n            this.notifyEvent(cc.xx.gameCfg.BATTERTY.BATTERTY_CHARGING,false);\n        }\n    },\n    /**\n     *  电量改变监听的回调更新(被原生回调的)\n     * @param elevel 电量值\n     */\n    updateCurrentBatteryLevel(elevel) {\n        cc.log(\"oc观察者观察电量发生改变回调\"+elevel);\n        this.notifyEvent(cc.xx.gameCfg.BATTERTY.BATTERTY_LEVEL_UPDATE,elevel.toPrecision(2));\n    },\n    /**\n     *  成功上传到腾讯服务器后回调(被原生回调的)\n     * @param fileID 语音消息id\n     */\n    didUploadToGvoiceSever(fileID) {\n        cc.log(\"oc回调js成功，上传成功\"+fileID);\n        this.startEvent(cc.xx.gameCfg.EVENT.EVENT_YUYIN_UPLOAD,fileID);\n    },\n    /**\n     *  播放成功后回调(被原生回调的)\n     * @param\n     */\n    didFinishPlayCurrentMessage() {\n        cc.log(\"oc回调js成功，播放完成\");\n        this.notifyEvent(cc.xx.gameCfg.GVOICE.GVOICE_MESSAGE_FINISH_PLAYING);\n    },\n});"]}